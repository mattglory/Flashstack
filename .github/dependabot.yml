version: 2
updates:
  # Root package (contracts/tests)
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    ignore:
      # Only allow patch updates for esbuild (major/minor can break builds)
      - dependency-name: "esbuild"
        update-types: ["version-update:semver-major", "version-update:semver-minor"]

  # Frontend (web/)
  - package-ecosystem: "npm"
    directory: "/web"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    ignore:
      # Block major version upgrades for Next.js (14â†’15 requires migration)
      - dependency-name: "next"
        update-types: ["version-update:semver-major"]
      # Block major React upgrades (tied to Next.js version)
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]
